<mat-card>
  <h1>Социальный контракт</h1>
  <mat-accordion multi>
    <mat-expansion-panel [expanded]="true">
      <mat-expansion-panel-header>
        <mat-panel-title>
          Основные сведения
        </mat-panel-title>
        <ng-container [ngTemplateOutlet]="status"></ng-container>
      </mat-expansion-panel-header>
      <basic-information [form]="basicInformationForm" (valid)="log($event)"></basic-information>
    </mat-expansion-panel>
    <mat-expansion-panel [expanded]="true">
      <mat-expansion-panel-header>
        <mat-panel-title>
          Сведения о семье (гражданине)
        </mat-panel-title>
      </mat-expansion-panel-header>
      <family-information-form></family-information-form>
    </mat-expansion-panel>
    <mat-expansion-panel [expanded]="true">
      <mat-expansion-panel-header>
        <mat-panel-title>
          Программа социальной адаптации
        </mat-panel-title>
      </mat-expansion-panel-header>
      <social-adaptation-form></social-adaptation-form>
    </mat-expansion-panel>
    <mat-expansion-panel [expanded]="true">
      <mat-expansion-panel-header>
        <mat-panel-title>
          Исполнение контракта
        </mat-panel-title>
      </mat-expansion-panel-header>
      <contract-execution-form></contract-execution-form>
    </mat-expansion-panel>
    <mat-expansion-panel [expanded]="true">
      <mat-expansion-panel-header>
        <mat-panel-title>
          Расторжение контракта
        </mat-panel-title>
      </mat-expansion-panel-header>
      <contract-termination-form></contract-termination-form>
    </mat-expansion-panel>
    <mat-expansion-panel [expanded]="true">
      <mat-expansion-panel-header>
        <mat-panel-title>
         Результаты обследования после исполнения контракта
        </mat-panel-title>
      </mat-expansion-panel-header>
      <execution-result-form></execution-result-form>
    </mat-expansion-panel>
  </mat-accordion>
  <div class="userActions">
    <button mat-flat-button color="primary">Загрузить файл</button>
  </div>
  <div class="userActions print">
    <button mat-flat-button><mat-icon>print</mat-icon> Печать</button>
  </div>
  <div class="userActions saveOrClose">
    <button mat-flat-button color="primary">Сохранить</button>
    <button mat-stroked-button>Закрыть</button>
  </div>
</mat-card>

<ng-template #status>
  <ng-container *ngIf="basicInformationForm.dirty">
    <ng-container *ngIf="basicInformationForm.valid; else incorrect">
      <mat-panel-description style="color: #eee3e3">
        Заполнено
      </mat-panel-description>
    </ng-container>
    <ng-template #incorrect>
      <mat-panel-description style="color: #ff0000">
        Заполните все поля корректно
      </mat-panel-description>
    </ng-template>
  </ng-container>
</ng-template>
